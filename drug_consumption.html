<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>è¯å‰‚æ¶ˆè€—æ ¸ç®—</title>
<link href="//unpkg.com/layui@2.9.13/dist/css/layui.css" rel="stylesheet">
<style>
body{padding:10px}
table{width:100%;border-collapse:collapse}
td,th{border:1px solid #ccc;padding:4px;text-align:center}
.input-big{width:100%;box-sizing:border-box;font-size:18px;height:40px;padding:6px 8px}
.input-small{width:120px;font-size:14px;height:28px;padding:2px 4px}
textarea{width:100%;box-sizing:border-box;min-height:160px;font-size:15px}
.section{margin-bottom:30px}
.footer{margin-top:20px;color:#666;font-size:12px}
</style>

<style>
/* === è¾“å…¥æ˜¾ç¤ºå¢å¼ºï¼ˆ6ä½æ•°ä¸è¢«æˆªæ–­ï¼‰ === */
.table-wrap {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

input[type="number"] {
  min-width: 120px;   /* å¯å®Œæ•´æ˜¾ç¤º 123456 */
  width: 100%;
  text-align: right;
  box-sizing: border-box;
}

/* ä¿è¯è¡¨æ ¼å•å…ƒæ ¼ä¸å¼ºåˆ¶å‹ç¼© */
td, th {
  min-width: 80px;
  white-space: nowrap;
}
</style>


<style>
/* === è¾“å…¥æ¡†æœ€ç»ˆæ˜¾ç¤ºè§„èŒƒ === */

/* 1ï¸âƒ£ æµ“åº¦è¾“å…¥æ¡†ï¼šåªéœ€ä¸¤ä½æ•°å®½åº¦ */
#c_p1_m, #c_p1_a, #c_p2_m, #c_p2_a {
  min-width: 70px !important;
  max-width: 80px !important;
  text-align: center;
}

/* 2ï¸âƒ£ æ‰€æœ‰æ•°å­—è¾“å…¥ï¼šå±…ä¸­æ˜¾ç¤º */
input[type="number"] {
  text-align: center !important;
}
</style>

</head>
<body>

<!-- é¡µé¢åˆ‡æ¢ -->
<div style="margin:12px 0;text-align:center;">
  <button type="button" onclick="location.href='index.html'" style="padding:8px 14px;font-size:15px;">
    â† è¿”å›é¦–é¡µ
  </button>
</div>


<h1>è¯å‰‚æ¶ˆè€—æ ¸ç®—</h1>

<p>æµ“åº¦ï¼ˆ%ï¼‰ï¼š</p>
<div class="table-wrap"><table>
<tr><th></th><th>æµ“åº¦</th></tr>
<tr><td>ä¸€æœŸæ··å‡</td><td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-small" id="c_p1_m"></td></tr>
<tr><td>ä¸€æœŸåŠ©å‡</td><td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-small" id="c_p1_a"></td></tr>
<tr><td>äºŒæœŸæ··å‡</td><td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-small" id="c_p2_m"></td></tr>
<tr><td>äºŒæœŸåŠ©å‡</td><td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-small" id="c_p2_a"></td></tr>
</table></div>

<div class="section"><h2>ä¸€æœŸ Â· æ··å‡</h2>
<div class="table-wrap"><table>
<tr><th>æ—¶é—´</th><th>1</th><th>2</th><th>3</th><th>4</th><th>ä¸€äºŒç³»æ¶ˆè€—</th><th>ä¸‰å››ç³»æ¶ˆè€—</th></tr>
<tr><td>8</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m18"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m28"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m38"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m48"></td>
<td rowspan="2" id="o_p1_m_12"></td>
<td rowspan="2" id="o_p1_m_34"></td></tr>
<tr><td>17</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m117"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m217"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m317"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1m417"></td></tr>
</table></div></div>

<div class="section"><h2>ä¸€æœŸ Â· åŠ©å‡</h2>
<div class="table-wrap"><table>
<tr><th>æ—¶é—´</th><th>1</th><th>2</th><th>3</th><th>4</th><th>ä¸€äºŒç³»æ¶ˆè€—</th><th>ä¸‰å››ç³»æ¶ˆè€—</th></tr>
<tr><td>8</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a18"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a28"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a38"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a48"></td>
<td rowspan="2" id="o_p1_a_12"></td>
<td rowspan="2" id="o_p1_a_34"></td></tr>
<tr><td>17</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a117"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a217"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a317"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p1a417"></td></tr>
</table></div></div>

<div class="section"><h2>äºŒæœŸ Â· æ··å‡</h2>
<div class="table-wrap"><table>
<tr><th>æ—¶é—´</th><th>5-1</th><th>5-2</th><th>6-1</th><th>6-2</th><th>5ç³»æ¶ˆè€—</th><th>6ç³»æ¶ˆè€—</th></tr>
<tr><td>8</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m518"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m528"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m618"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m628"></td>
<td rowspan="2" id="o_p2_m_5"></td>
<td rowspan="2" id="o_p2_m_6"></td></tr>
<tr><td>17</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m5117"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m5217"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m6117"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2m6217"></td></tr>
</table></div></div>

<div class="section"><h2>äºŒæœŸ Â· åŠ©å‡</h2>
<div class="table-wrap"><table>
<tr><th>æ—¶é—´</th><th>5-1</th><th>5-2</th><th>6-1</th><th>6-2</th><th>5ç³»æ¶ˆè€—</th><th>6ç³»æ¶ˆè€—</th></tr>
<tr><td>8</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a518"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a528"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a618"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a628"></td>
<td rowspan="2" id="o_p2_a_5"></td>
<td rowspan="2" id="o_p2_a_6"></td></tr>
<tr><td>17</td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a5117"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a5217"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a6117"></td>
<td><input enterkeyhint="next" type="number" inputmode="decimal" class="input-big" id="p2a6217"></td></tr>
</table></div></div>

<h2>è‡ªåŠ¨ç”Ÿæˆç­æŠ¥ / æ—¥æŠ¥</h2>
<textarea id="report"></textarea>

<button type="button" onclick="copyReport()" style="margin-top:8px;width:100%;height:44px;font-size:16px;">ğŸ“‹ ä¸€é”®å¤åˆ¶ç­æŠ¥</button>

<div class="footer">è®¡ç®—ç‰ˆæœ¬ï¼šV1.1.4-æ¢å¤è‡ªåŠ¨ä¿å­˜+å¤åˆ¶</div>

<script>
function n(id){return parseFloat(document.getElementById(id).value)||0}

/* === è‡ªåŠ¨ä¿å­˜ === */
function save(){
 const data={};
 document.querySelectorAll('input,textarea').forEach(e=>data[e.id]=e.value);
 localStorage.setItem('drug_data',JSON.stringify(data));
}
function load(){
 const data=JSON.parse(localStorage.getItem('drug_data')||'{}');
 Object.keys(data).forEach(id=>{
  const e=document.getElementById(id);
  if(e) e.value=data[id];
 });
}

/* === è®¡ç®—ï¼ˆåŸæ ·ä¿ç•™ï¼‰ === */
function calc(){
 const p1m12=(n('p1m117')-n('p1m18')+n('p1m217')-n('p1m28'))*n('c_p1_m')/100*1000;
 const p1m34=(n('p1m317')-n('p1m38')+n('p1m417')-n('p1m48'))*n('c_p1_m')/100*1000;
 const p1a12=(n('p1a117')-n('p1a18')+n('p1a217')-n('p1a28'))*n('c_p1_a')/100*1000;
 const p1a34=(n('p1a317')-n('p1a38')+n('p1a417')-n('p1a48'))*n('c_p1_a')/100*1000;
 const p2m5=(n('p2m5117')-n('p2m518')+n('p2m5217')-n('p2m528'))*n('c_p2_m')/100*1000;
 const p2m6=(n('p2m6117')-n('p2m618')+n('p2m6217')-n('p2m628'))*n('c_p2_m')/100*1000;
 const p2a5=(n('p2a5117')-n('p2a518')+n('p2a5217')-n('p2a528'))*n('c_p2_a')/100*1000;
 const p2a6=(n('p2a6117')-n('p2a618')+n('p2a6217')-n('p2a628'))*n('c_p2_a')/100*1000;

 document.getElementById('o_p1_m_12').innerText=p1m12.toFixed(2);
 document.getElementById('o_p1_m_34').innerText=p1m34.toFixed(2);
 document.getElementById('o_p1_a_12').innerText=p1a12.toFixed(2);
 document.getElementById('o_p1_a_34').innerText=p1a34.toFixed(2);
 document.getElementById('o_p2_m_5').innerText=p2m5.toFixed(2);
 document.getElementById('o_p2_m_6').innerText=p2m6.toFixed(2);
 document.getElementById('o_p2_a_5').innerText=p2a5.toFixed(2);
 document.getElementById('o_p2_a_6').innerText=p2a6.toFixed(2);

 document.getElementById('report').value =
`è¯å‰‚æ¶ˆè€—æ—¥æŠ¥
ä¸€æœŸæ··å‡ï¼šä¸€äºŒç³»${p1m12.toFixed(2)} / ä¸‰å››ç³»${p1m34.toFixed(2)}ï¼ˆåˆè®¡ï¼š${(p1m12+p1m34).toFixed(2)}ï¼‰
ä¸€æœŸåŠ©å‡ï¼šä¸€äºŒç³»${p1a12.toFixed(2)} / ä¸‰å››ç³»${p1a34.toFixed(2)}ï¼ˆåˆè®¡ï¼š${(p1a12+p1a34).toFixed(2)}ï¼‰
äºŒæœŸæ··å‡ï¼šäº”ç³»${p2m5.toFixed(2)} / å…­ç³»${p2m6.toFixed(2)}ï¼ˆåˆè®¡ï¼š${(p2m5+p2m6).toFixed(2)}ï¼‰
äºŒæœŸåŠ©å‡ï¼šäº”ç³»${p2a5.toFixed(2)} / å…­ç³»${p2a6.toFixed(2)}ï¼ˆåˆè®¡ï¼š${(p2a5+p2a6).toFixed(2)}ï¼‰`;
 save();
}

/* === ä¸€é”®å¤åˆ¶ === */
function copyReport(){
 const t=document.getElementById('report');
 t.select();
 t.setSelectionRange(0,99999);
 document.execCommand('copy');
 alert('ç­æŠ¥å†…å®¹å·²å¤åˆ¶');
}

document.querySelectorAll('input,textarea').forEach(e=>e.addEventListener('input',calc));
load();
calc();
</script>


<script>
/* === è¾“å…¥å®Œæˆåè‡ªåŠ¨è·³åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡† === */
(function(){
  const inputs = Array.from(document.querySelectorAll('input'));
  inputs.forEach((el, idx) => {
    el.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){
        e.preventDefault();
        const next = inputs[idx + 1];
        if(next){
          next.focus();
          next.select();
        }
      }
    });
  });
})();
</script>

</body>
</html>
